      - name: Run tests with timeout
        env:
          TEST_DATABASE_URL: 'sqlite+aiosqlite:///:memory:'
          MAP_SERVICE_URL: 'http://test-map-service.mock'
          SECRET_KEY: 'test-secret-key-for-tests'
          LOG_LEVEL: 'WARNING'
        run: |
          echo "Running tests with 60 second timeout..."
          
          # Usar timeout do Linux para forçar término
          timeout 60 python -m pytest tests/ \
            --cov=./ \
            --cov-report=xml \
            --cov-report=html \
            -v \
            --disable-warnings \
            -p no:asyncio  # Tenta desabilitar asyncio se for o problema
          
          echo "Tests completed (forced by timeout if needed)"